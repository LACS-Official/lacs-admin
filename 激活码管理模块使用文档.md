# 激活码管理模块使用文档

## 概述

激活码管理模块是一个完整的前端管理系统，用于管理软件激活码的生成、查看、删除和统计。该模块基于 Next.js 和 Ant Design 构建，提供了现代化的用户界面和完善的功能。

## 功能特性

### 🔑 核心功能
- **激活码列表** - 查看所有激活码，支持搜索、筛选和分页
- **新增激活码** - 创建新的激活码，支持自定义过期时间和元数据
- **激活码详情** - 查看激活码的完整信息
- **删除激活码** - 安全删除不需要的激活码
- **统计分析** - 查看激活码使用情况和统计信息

### 🎨 界面特性
- **响应式设计** - 支持桌面端和移动端
- **现代化UI** - 基于 Ant Design 设计系统
- **错误处理** - 完善的错误提示和恢复机制
- **加载状态** - 友好的加载提示和骨架屏

## 页面结构

```
/dashboard/activation-codes/
├── page.tsx              # 激活码列表页面
├── new/page.tsx          # 新增激活码页面
├── [id]/page.tsx         # 激活码详情页面
├── stats/page.tsx        # 统计分析页面
└── test/page.tsx         # 功能测试页面
```

## 组件结构

```
src/
├── components/
│   ├── ActivationCodeStats.tsx    # 统计信息组件
│   ├── ErrorBoundary.tsx          # 错误边界组件
│   └── LoadingState.tsx           # 加载状态组件
└── utils/
    └── activation-codes-api.ts    # API工具类
```

## 使用指南

### 1. 查看激活码列表

访问 `/dashboard/activation-codes` 查看所有激活码：

- **搜索功能**: 支持按激活码、产品名称、客户邮箱搜索
- **状态筛选**: 可按全部、有效、已使用、已过期、未使用筛选
- **分页浏览**: 支持分页查看，可调整每页显示数量
- **快速操作**: 查看详情、删除激活码

### 2. 创建新激活码

点击"新增激活码"按钮或访问 `/dashboard/activation-codes/new`：

#### 基本信息
- **有效期**: 设置激活码的有效天数（1-3650天）

#### 产品信息（可选）
- **产品名称**: 激活码对应的产品名称
- **产品版本**: 产品版本号
- **功能特性**: 可添加多个功能标签

#### 客户信息（可选）
- **客户邮箱**: 客户的邮箱地址
- **许可证类型**: 如 standard、premium、enterprise
- **订单ID**: 关联的订单编号
- **客户ID**: 客户的唯一标识

#### 自定义元数据（可选）
- 支持 JSON 格式的自定义数据

### 3. 查看激活码详情

点击列表中的"查看详情"按钮或访问 `/dashboard/activation-codes/[id]`：

- **基本信息**: 激活码、状态、创建时间、过期时间
- **产品信息**: 产品名称、版本、功能特性
- **元数据信息**: 客户信息和自定义数据
- **操作功能**: 复制激活码、删除激活码

### 4. 统计分析

访问 `/dashboard/activation-codes/stats` 查看详细统计：

- **总体统计**: 总数、已使用、有效、过期数量
- **使用率分析**: 使用率、过期率、有效率
- **状态分布**: 各状态激活码的分布情况
- **健康度评估**: 系统运行状态评估

### 5. 功能测试

访问 `/dashboard/activation-codes/test` 进行功能测试：

- **API连接测试**: 测试与后端API的连接
- **功能测试**: 测试创建、验证、列表等功能
- **手动测试**: 手动输入激活码进行验证

## API 集成

### 配置 API 基础地址

在 `src/utils/activation-codes-api.ts` 中配置：

```typescript
// 默认使用 LACS API 服务器
const activationCodeApi = new ActivationCodeApiClient('https://api-g.lacs.cc/api')

// 或指定其他API地址
const activationCodeApi = new ActivationCodeApiClient('https://your-api-domain.com/api')
```

**当前配置**: 系统已配置为使用 `https://api-g.lacs.cc/api` 作为激活码API的基础地址。

### 支持的 API 端点

基础地址: `https://api-g.lacs.cc/api`

- `GET https://api-g.lacs.cc/api/activation-codes` - 获取激活码列表
- `POST https://api-g.lacs.cc/api/activation-codes` - 创建新激活码
- `GET https://api-g.lacs.cc/api/activation-codes/[id]` - 获取激活码详情
- `DELETE https://api-g.lacs.cc/api/activation-codes/[id]` - 删除激活码
- `POST https://api-g.lacs.cc/api/activation-codes/verify` - 验证激活码
- `GET https://api-g.lacs.cc/api/activation-codes/stats` - 获取统计信息
- `POST https://api-g.lacs.cc/api/activation-codes/cleanup` - 清理过期激活码

## 错误处理

### 网络错误
- 自动重试机制
- 友好的错误提示
- 网络状态检测

### API 错误
- 统一的错误格式处理
- 详细的错误信息显示
- 错误恢复建议

### 用户操作错误
- 表单验证
- 操作确认对话框
- 防重复提交

## 响应式设计

### 桌面端 (≥1200px)
- 完整的表格视图
- 侧边栏布局
- 多列统计卡片

### 平板端 (768px-1199px)
- 简化的表格列
- 响应式统计卡片
- 优化的操作按钮

### 移动端 (<768px)
- 卡片式列表视图
- 垂直布局
- 全宽操作按钮

## 性能优化

### 数据加载
- 分页加载减少数据量
- 骨架屏提升感知性能
- 错误边界防止崩溃

### 用户体验
- 防抖搜索
- 乐观更新
- 加载状态提示

## 安全考虑

### 数据保护
- 激活码复制功能
- 敏感信息脱敏
- 操作权限控制

### 操作安全
- 删除确认对话框
- 表单数据验证
- 错误信息过滤

## 扩展开发

### 添加新功能
1. 在 `activation-codes-api.ts` 中添加新的 API 方法
2. 创建对应的页面组件
3. 更新导航菜单
4. 添加错误处理

### 自定义样式
- 使用 Ant Design 主题定制
- 遵循现有的设计规范
- 保持响应式兼容性

### 国际化支持
- 提取文本到语言文件
- 使用 Next.js i18n 功能
- 适配不同地区格式

## 故障排除

### 常见问题

1. **API 连接失败**
   - 检查 API 基础地址配置
   - 确认后端服务运行状态
   - 检查网络连接

2. **页面加载错误**
   - 查看浏览器控制台错误
   - 检查路由配置
   - 确认组件导入路径

3. **数据显示异常**
   - 检查 API 响应格式
   - 确认数据类型定义
   - 验证数据转换逻辑

### 调试工具
- 使用测试页面验证功能
- 浏览器开发者工具
- React DevTools

## 更新日志

### v1.0.0 (2024-01-27)
- 初始版本发布
- 完整的激活码管理功能
- 响应式设计支持
- 错误处理和用户反馈
- 统计分析功能

---

**维护团队**: LACS Admin 开发组  
**最后更新**: 2024-01-27  
**文档版本**: v1.0.0
